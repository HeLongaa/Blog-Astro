---
import { getCategoriesList } from "@/utils/getArchive";
import { getCollection } from "astro:content";
export async function getStaticPaths(): Promise<any> {
	const posts = await getCollection("blog");
	return posts.map((post: any) => ({
		params: { categories: post.data.categories },
		props: post,
	}));
}
// 获取分类列表
const { categories } = Astro.params;
const articleList = await getCategoriesList(categories);
// 页面 Info
import SITE_CONFIG from "@/config";
const { Description } = SITE_CONFIG;
// 公共 Layout
import Layout from "@/layouts/Layout/Layout.astro";
// 文章列表组件
import Archive from "@/components/Archive/Archive.astro";
---

<Layout
	title={`分类：${categories}`}
	description={Description}
	activeNav="categories"
>
	<div class="vh-category-page">
		<div class="vh-category-breadcrumb">
			<a href="/categories">
				<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2v11z"></path>
				</svg>
				所有分类
			</a>
			<span class="separator">›</span>
			<span class="current">
				<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2v11z"></path>
				</svg>
				{categories}
			</span>
		</div>
		<Archive articleList={articleList} />
	</div>
</Layout>

<style>
	.vh-category-page {
		width: 100%;
	}

	.vh-category-breadcrumb {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		padding: 1rem 1rem 0;
		margin-bottom: 1rem;
		font-size: 0.9rem;

		a {
			display: flex;
			align-items: center;
			gap: 0.3rem;
			color: var(--vh-main-color);
			text-decoration: none;
			transition: color 0.2s ease-in-out;

			svg {
				transition: color 0.2s ease-in-out;
			}

			&:hover {
				color: var(--vh-main-color-88);
			}
		}

		.separator {
			color: var(--vh-font-56);
			font-weight: 500;
		}

		.current {
			display: flex;
			align-items: center;
			gap: 0.3rem;
			color: var(--vh-font-color);
			font-weight: 500;
		}
	}

	@media screen and (max-width: 768px) {
		.vh-category-breadcrumb {
			padding: 0.75rem 0.75rem 0;
			font-size: 0.85rem;
		}
	}
</style>
